<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Managing security context constraints</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="managing-pod-security-policies" class="article">
<div id="header">
<h1>Managing security context constraints</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In {product-title}, you can use security context constraints (SCCs) to control permissions for the pods in your cluster.</p>
</div>
<div class="paragraph">
<p>Default SCCs are created during installation and when you install some Operators or other components. As a cluster administrator, you can also create your own SCCs by using the OpenShift CLI (<code>oc</code>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not modify the default SCCs. Customizing the default SCCs can lead to issues when some of the platform pods deploy or
{product-title}
is upgraded. Additionally, the default SCC values are reset to the defaults during some cluster upgrades, which discards all customizations to those SCCs.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-context-constraints-about_configuring-internal-oauth">About security context constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similar to the way that RBAC resources control user access, administrators can use security context constraints (SCCs) to control permissions for pods. These permissions determine the actions that a pod can perform and what resources it can access. You can use SCCs to define a set of conditions that a pod must run with to be accepted into the system.</p>
</div>
<div class="paragraph">
<p>Security context constraints allow an administrator to control:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Whether a pod can run privileged containers with the <code>allowPrivilegedContainer</code> flag</p>
</li>
<li>
<p>Whether a pod is constrained with the <code>allowPrivilegeEscalation</code> flag</p>
</li>
<li>
<p>The capabilities that a container can request</p>
</li>
<li>
<p>The use of host directories as volumes</p>
</li>
<li>
<p>The SELinux context of the container</p>
</li>
<li>
<p>The container user ID</p>
</li>
<li>
<p>The use of host namespaces and networking</p>
</li>
<li>
<p>The allocation of an <code>FSGroup</code> that owns the pod volumes</p>
</li>
<li>
<p>The configuration of allowable supplemental groups</p>
</li>
<li>
<p>Whether a container requires write access to its root file system</p>
</li>
<li>
<p>The usage of volume types</p>
</li>
<li>
<p>The configuration of allowable <code>seccomp</code> profiles</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not set the <code>openshift.io/run-level</code> label on any namespaces in {product-title}. This label is for use by internal {product-title} components to manage the startup of major API groups, such as the Kubernetes API server and OpenShift API server. If the <code>openshift.io/run-level</code> label is set, no SCCs are applied to pods in that namespace, causing any workloads running in that namespace to be highly privileged.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="default-sccs_configuring-internal-oauth">Default security context constraints</h3>
<div class="paragraph">
<p>The cluster contains several default security context constraints (SCCs) as described in the table below. Additional SCCs might be installed when you install Operators or other components to {product-title}.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not modify the default SCCs. Customizing the default SCCs can lead to issues when some of the platform pods deploy or
{product-title}
is upgraded. Additionally, the default SCC values are reset to the defaults during some cluster upgrades, which discards all customizations to those SCCs.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Default security context constraints</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Security context constraint</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>anyuid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides all features of the <code>restricted</code> SCC, but allows users to run with any UID and any GID.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostaccess</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Allows access to all host namespaces but still requires pods to be run with a UID and SELinux context that are allocated to the namespace.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This SCC allows host access to namespaces, file systems, and PIDs. It should only be used by trusted pods. Grant with caution.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostmount-anyuid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides all the features of the <code>restricted</code> SCC, but allows host mounts and running as any UID and any GID on the system.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This SCC allows host file system access as any UID, including UID 0. Grant with caution.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostnetwork</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Allows using host networking and host ports but still requires pods to be run with a UID and SELinux context that are allocated to the namespace.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>If additional workloads are run on control plane hosts, use caution when providing access to <code>hostnetwork</code>. A workload that runs <code>hostnetwork</code> on a control plane host is effectively root on the cluster and must be trusted accordingly.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostnetwork-v2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Like the <code>hostnetwork</code> SCC, but with the following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ALL</code> capabilities are dropped from containers.</p>
</li>
<li>
<p>The <code>NET_BIND_SERVICE</code> capability can be added explicitly.</p>
</li>
<li>
<p><code>seccompProfile</code> is set to <code>runtime/default</code> by default.</p>
</li>
<li>
<p><code>allowPrivilegeEscalation</code> must be unset or set to <code>false</code> in security contexts.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node-exporter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used for the Prometheus node exporter.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This SCC allows host file system access as any UID, including UID 0. Grant with caution.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nonroot</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides all features of the <code>restricted</code> SCC, but allows users to run with any non-root UID. The user must specify the UID or it must be specified in the manifest of the container runtime.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nonroot-v2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Like the <code>nonroot</code> SCC, but with the following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ALL</code> capabilities are dropped from containers.</p>
</li>
<li>
<p>The <code>NET_BIND_SERVICE</code> capability can be added explicitly.</p>
</li>
<li>
<p><code>seccompProfile</code> is set to <code>runtime/default</code> by default.</p>
</li>
<li>
<p><code>allowPrivilegeEscalation</code> must be unset or set to <code>false</code> in security contexts.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>privileged</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Allows access to all privileged and host features and the ability to run as any user, any group, any FSGroup, and with any SELinux context.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This is the most relaxed SCC and should be used only for cluster administration. Grant with caution.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>privileged</code> SCC allows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users to run privileged pods</p>
</li>
<li>
<p>Pods to mount host directories as volumes</p>
</li>
<li>
<p>Pods to run as any user</p>
</li>
<li>
<p>Pods to run with any MCS label</p>
</li>
<li>
<p>Pods to use the host&#8217;s IPC namespace</p>
</li>
<li>
<p>Pods to use the host&#8217;s PID namespace</p>
</li>
<li>
<p>Pods to use any FSGroup</p>
</li>
<li>
<p>Pods to use any supplemental group</p>
</li>
<li>
<p>Pods to use any seccomp profiles</p>
</li>
<li>
<p>Pods to request any capabilities</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Setting <code>privileged: true</code> in the pod specification does not necessarily select the <code>privileged</code> SCC. The SCC that has <code>allowPrivilegedContainer: true</code> and has the highest prioritization will be chosen if the user has the permissions to use it.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restricted</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denies access to all host features and requires pods to be run with a UID, and SELinux context that are allocated to the namespace.</p>
</div>
<div class="paragraph">
<p>The <code>restricted</code> SCC:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensures that pods cannot run as privileged</p>
</li>
<li>
<p>Ensures that pods cannot mount host directory volumes</p>
</li>
<li>
<p>Requires that a pod is run as a user in a pre-allocated range of UIDs</p>
</li>
<li>
<p>Requires that a pod is run with a pre-allocated MCS label</p>
</li>
<li>
<p>Allows pods to use any FSGroup</p>
</li>
<li>
<p>Allows pods to use any supplemental group</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In clusters that were upgraded from {product-title} 4.10 or earlier, this SCC is available for use by any authenticated user. The <code>restricted</code> SCC is no longer available to users of new {product-title} 4.11 or later installations, unless the access is explicitly granted.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restricted-v2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Like the <code>restricted</code> SCC, but with the following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ALL</code> capabilities are dropped from containers.</p>
</li>
<li>
<p>The <code>NET_BIND_SERVICE</code> capability can be added explicitly.</p>
</li>
<li>
<p><code>seccompProfile</code> is set to <code>runtime/default</code> by default.</p>
</li>
<li>
<p><code>allowPrivilegeEscalation</code> must be unset or set to <code>false</code> in security contexts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is the most restrictive SCC provided by a new installation and will be used by default for authenticated users.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>restricted-v2</code> SCC is the most restrictive of the SCCs that is included by default with the system. However, you can create a custom SCC that is even more restrictive. For example, you can create an SCC that restricts <code>readOnlyRootFilesystem</code> to <code>true</code>.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="scc-settings_configuring-internal-oauth">Security context constraints settings</h3>
<div class="paragraph">
<p>Security context constraints (SCCs) are composed of settings and strategies that control the security features
a pod has access to. These settings fall into three categories:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controlled by a boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fields of this type default to the most restrictive value. For example,
<code>AllowPrivilegedContainer</code> is always set to <code>false</code> if unspecified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controlled by an allowable set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fields of this type are checked against the set to ensure their value is
allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controlled by a strategy</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Items that have a strategy to generate a value provide:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A mechanism to generate the value, and</p>
</li>
<li>
<p>A mechanism to ensure that a specified value falls into the set of allowable
values.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>CRI-O has the following default list of capabilities that are allowed for each container of a pod:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CHOWN</code></p>
</li>
<li>
<p><code>DAC_OVERRIDE</code></p>
</li>
<li>
<p><code>FSETID</code></p>
</li>
<li>
<p><code>FOWNER</code></p>
</li>
<li>
<p><code>SETGID</code></p>
</li>
<li>
<p><code>SETUID</code></p>
</li>
<li>
<p><code>SETPCAP</code></p>
</li>
<li>
<p><code>NET_BIND_SERVICE</code></p>
</li>
<li>
<p><code>KILL</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The containers use the capabilities from this default list, but pod manifest authors can alter the list by requesting additional capabilities or removing some of the default behaviors. Use the <code>allowedCapabilities</code>, <code>defaultAddCapabilities</code>, and <code>requiredDropCapabilities</code> parameters to control such requests from the pods. With these parameters you can specify which capabilities can be requested, which ones must be added to each container, and which ones must be forbidden, or dropped, from each container.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can drop all capabilites from containers by setting the <code>requiredDropCapabilities</code> parameter to <code>ALL</code>. This is what the <code>restricted-v2</code> SCC does.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="authorization-SCC-strategies_configuring-internal-oauth">Security context constraints strategies</h3>
<div class="ulist">
<div class="title">RunAsUser</div>
<ul>
<li>
<p><code>MustRunAs</code> - Requires a <code>runAsUser</code> to be configured. Uses the configured
<code>runAsUser</code> as the default. Validates against the configured <code>runAsUser</code>.</p>
<div class="listingblock">
<div class="title">Example <code>MustRunAs</code> snippet</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">...
runAsUser:
  type: MustRunAs
  uid: &lt;id&gt;
...</code></pre>
</div>
</div>
</li>
<li>
<p><code>MustRunAsRange</code> - Requires minimum and maximum values to be defined if not
using pre-allocated values. Uses the minimum as the default. Validates against
the entire allowable range.</p>
<div class="listingblock">
<div class="title">Example <code>MustRunAsRange</code> snippet</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">...
runAsUser:
  type: MustRunAsRange
  uidRangeMax: &lt;maxvalue&gt;
  uidRangeMin: &lt;minvalue&gt;
...</code></pre>
</div>
</div>
</li>
<li>
<p><code>MustRunAsNonRoot</code> - Requires that the pod be submitted with a non-zero
<code>runAsUser</code> or have the <code>USER</code> directive defined in the image. No default
provided.</p>
<div class="listingblock">
<div class="title">Example <code>MustRunAsNonRoot</code> snippet</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">...
runAsUser:
  type: MustRunAsNonRoot
...</code></pre>
</div>
</div>
</li>
<li>
<p><code>RunAsAny</code> - No default provided. Allows any <code>runAsUser</code> to be specified.</p>
<div class="listingblock">
<div class="title">Example <code>RunAsAny</code> snippet</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">...
runAsUser:
  type: RunAsAny
...</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">SELinuxContext</div>
<ul>
<li>
<p><code>MustRunAs</code> - Requires <code>seLinuxOptions</code> to be configured if not using
pre-allocated values. Uses <code>seLinuxOptions</code> as the default. Validates against
<code>seLinuxOptions</code>.</p>
</li>
<li>
<p><code>RunAsAny</code> - No default provided. Allows any <code>seLinuxOptions</code> to be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">SupplementalGroups</div>
<ul>
<li>
<p><code>MustRunAs</code> - Requires at least one range to be specified if not using
pre-allocated values. Uses the minimum value of the first range as the default.
Validates against all ranges.</p>
</li>
<li>
<p><code>RunAsAny</code> - No default provided. Allows any <code>supplementalGroups</code> to be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">FSGroup</div>
<ul>
<li>
<p><code>MustRunAs</code> - Requires at least one range to be specified if not using
pre-allocated values. Uses the minimum value of the first range as the default.
Validates against the first ID in the first range.</p>
</li>
<li>
<p><code>RunAsAny</code> - No default provided. Allows any <code>fsGroup</code> ID to be specified.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="authorization-controlling-volumes_configuring-internal-oauth">Controlling volumes</h3>
<div class="paragraph">
<p>The usage of specific volume types
can be controlled by setting the <code>volumes</code>
field of the SCC.</p>
</div>
<div class="paragraph">
<p>The allowable values of this field correspond to the volume
sources that are defined when creating a volume:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#awselasticblockstore"><code>awsElasticBlockStore</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#azuredisk"><code>azureDisk</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#azurefile"><code>azureFile</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#cephfs"><code>cephFS</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#cinder"><code>cinder</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#configmap"><code>configMap</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/#csi-ephemeral-volumes"><code>csi</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#downwardapi"><code>downwardAPI</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#emptydir"><code>emptyDir</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#fc"><code>fc</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#flexvolume"><code>flexVolume</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#flocker"><code>flocker</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#gcepersistentdisk"><code>gcePersistentDisk</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#gitrepo"><code>gitRepo</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#glusterfs"><code>glusterfs</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath"><code>hostPath</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#iscsi"><code>iscsi</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#nfs"><code>nfs</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#persistentvolumeclaim"><code>persistentVolumeClaim</code></a></p>
</li>
<li>
<p><code>photonPersistentDisk</code></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#portworxvolume"><code>portworxVolume</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#projected"><code>projected</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#quobyte"><code>quobyte</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#rbd"><code>rbd</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#scaleio"><code>scaleIO</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#secret"><code>secret</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#storageos"><code>storageos</code></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/volumes/#vspherevolume"><code>vsphereVolume</code></a></p>
</li>
<li>
<p><strong>*</strong> (A special value to allow the use of all volume types.)</p>
</li>
<li>
<p><code>none</code> (A special value to disallow the use of all volumes types. Exists only for backwards compatibility.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The recommended minimum set of allowed volumes for new SCCs are <code>configMap</code>,
<code>downwardAPI</code>, <code>emptyDir</code>, <code>persistentVolumeClaim</code>, <code>secret</code>, and <code>projected</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This list of allowable volume types is not exhaustive because new types are
added with each release of {product-title}.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For backwards compatibility, the usage of <code>allowHostDirVolumePlugin</code> overrides
settings in the <code>volumes</code> field. For example, if <code>allowHostDirVolumePlugin</code>
is set to false but allowed in the <code>volumes</code> field, then the <code>hostPath</code>
value will be removed from <code>volumes</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="admission_configuring-internal-oauth">Admission control</h3>
<div class="paragraph">
<p><em>Admission control</em> with SCCs allows for control over the creation of resources
based on the capabilities granted to a user.</p>
</div>
<div class="paragraph">
<p>In terms of the SCCs, this means that an admission controller can inspect the
user information made available in the context to retrieve an appropriate set of
SCCs. Doing so ensures the pod is authorized to make requests about its
operating environment or to generate a set of constraints to apply to the pod.</p>
</div>
<div class="paragraph">
<p>The set of SCCs that admission uses to authorize a pod are determined by the
user identity and groups that the user belongs to. Additionally, if the pod
specifies a service account, the set of allowable SCCs includes any constraints
accessible to the service account.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When you create a workload resource, such as a deployment, only the service account is used to find the SCCs and is used to admit the pods when they are created.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>When creating pods directly, SCCs admission considers SCC permissions of both the caller and the Service Account that runs the pod. When a pod is created by a pod controller such as a deployment or a job, only Service Account SCC permissions are considered.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Admission uses the following approach to create the final security context for
the pod:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Retrieve all SCCs available for use.</p>
</li>
<li>
<p>Generate field values for security context settings that were not specified
on the request.</p>
</li>
<li>
<p>Validate the final settings against the available constraints.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If a matching set of constraints is found, then the pod is accepted. If the
request cannot be matched to an SCC, the pod is rejected.</p>
</div>
<div class="paragraph">
<p>A pod must validate every field against the SCC. The following are examples for
just two of the fields that must be validated:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>These examples are in the context of a strategy using the pre-allocated values.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>An FSGroup SCC strategy of <code>MustRunAs</code></strong></p>
</div>
<div class="paragraph">
<p>If the pod defines a <code>fsGroup</code> ID, then that ID must equal the default
<code>fsGroup</code> ID. Otherwise, the pod is not validated by that SCC and the next SCC
is evaluated.</p>
</div>
<div class="paragraph">
<p>If the <code>SecurityContextConstraints.fsGroup</code> field has value <code>RunAsAny</code>
and the pod specification omits the <code>Pod.spec.securityContext.fsGroup</code>,
then this field is considered valid. Note that it is possible that during
validation, other SCC settings will reject other pod fields and thus cause the
pod to fail.</p>
</div>
<div class="paragraph">
<p><strong>A <code>SupplementalGroups</code> SCC strategy of <code>MustRunAs</code></strong></p>
</div>
<div class="paragraph">
<p>If the pod specification defines one or more <code>supplementalGroups</code> IDs, then
the pod&#8217;s IDs must equal one of the IDs in the namespace&#8217;s
<code>openshift.io/sa.scc.supplemental-groups</code> annotation. Otherwise, the pod is not
validated by that SCC and the next SCC is evaluated.</p>
</div>
<div class="paragraph">
<p>If the <code>SecurityContextConstraints.supplementalGroups</code> field has value <code>RunAsAny</code>
and the pod specification omits the <code>Pod.spec.securityContext.supplementalGroups</code>,
then this field is considered valid. Note that it is possible that during
validation, other SCC settings will reject other pod fields and thus cause the
pod to fail.</p>
</div>
</div>
<div class="sect2">
<h3 id="scc-prioritization_configuring-internal-oauth">Security context constraints prioritization</h3>
<div class="paragraph">
<p>Security context constraints (SCCs) have a priority field that affects the ordering when attempting to validate a request by the admission controller.</p>
</div>
<div class="paragraph">
<p>A priority value of <code>0</code> is the lowest possible priority. A nil priority is considered a <code>0</code>, or lowest, priority. Higher priority SCCs are moved to the front of the set when sorting.</p>
</div>
<div class="paragraph">
<p>When the complete set of available SCCs is determined, the SCCs are ordered in the following manner:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The highest priority SCCs are ordered first.</p>
</li>
<li>
<p>If the priorities are equal, the SCCs are sorted from most restrictive to least restrictive.</p>
</li>
<li>
<p>If both the priorities and restrictions are equal, the SCCs are sorted by name.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By default, the <code>anyuid</code> SCC granted to cluster administrators is given priority
in their SCC set. This allows cluster administrators to run pods as any
user by specifying <code>RunAsUser</code> in the pod&#8217;s <code>SecurityContext</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-context-constraints-example_configuring-internal-oauth">Example security context constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following examples show the security context constraints (SCC) format and
annotations:</p>
</div>
<div class="listingblock">
<div class="title">Annotated <code>privileged</code> SCC</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">allowHostDirVolumePlugin: true
allowHostIPC: true
allowHostNetwork: true
allowHostPID: true
allowHostPorts: true
allowPrivilegedContainer: true
allowedCapabilities: <b class="conum">(1)</b>
- '*'
apiVersion: security.openshift.io/v1
defaultAddCapabilities: [] <b class="conum">(2)</b>
fsGroup: <b class="conum">(3)</b>
  type: RunAsAny
groups: <b class="conum">(4)</b>
- system:cluster-admins
- system:nodes
kind: SecurityContextConstraints
metadata:
  annotations:
    kubernetes.io/description: 'privileged allows access to all privileged and host
      features and the ability to run as any user, any group, any fsGroup, and with
      any SELinux context.  WARNING: this is the most relaxed SCC and should be used
      only for cluster administration. Grant with caution.'
  creationTimestamp: null
  name: privileged
priority: null
readOnlyRootFilesystem: false
requiredDropCapabilities: <b class="conum">(5)</b>
- KILL
- MKNOD
- SETUID
- SETGID
runAsUser: <b class="conum">(6)</b>
  type: RunAsAny
seLinuxContext: <b class="conum">(7)</b>
  type: RunAsAny
seccompProfiles:
- '*'
supplementalGroups: <b class="conum">(8)</b>
  type: RunAsAny
users: <b class="conum">(9)</b>
- system:serviceaccount:default:registry
- system:serviceaccount:default:router
- system:serviceaccount:openshift-infra:build-controller
volumes: <b class="conum">(10)</b>
- '*'</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A list of capabilities that a pod can request. An empty list means
that none of capabilities can be requested while the special symbol <code><strong>*</strong></code>
allows any capabilities.</p>
</li>
<li>
<p>A list of additional capabilities that are added to any pod.</p>
</li>
<li>
<p>The <code>FSGroup</code> strategy, which dictates the allowable values for the
security context.</p>
</li>
<li>
<p>The groups that can access this SCC.</p>
</li>
<li>
<p>A list of capabilities to drop from a pod. Or, specify <code>ALL</code> to drop all
capabilities.</p>
</li>
<li>
<p>The <code>runAsUser</code> strategy type, which dictates the allowable values for the
security context.</p>
</li>
<li>
<p>The <code>seLinuxContext</code> strategy type, which dictates the allowable values for
the security context.</p>
</li>
<li>
<p>The <code>supplementalGroups</code> strategy, which dictates the allowable supplemental
groups for the security context.</p>
</li>
<li>
<p>The users who can access this SCC.</p>
</li>
<li>
<p>The allowable volume types for the security context. In the example, <code>*</code> allows the use of all volume types.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>users</code> and <code>groups</code> fields on the SCC control which users can access the
SCC.
By default, cluster administrators, nodes, and the build controller are granted
access to the privileged SCC. All authenticated users are granted access to the
<code>restricted-v2</code> SCC.</p>
</div>
<div class="listingblock">
<div class="title">Without explicit <code>runAsUser</code> setting</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: security-context-demo
spec:
  securityContext: <b class="conum">(1)</b>
  containers:
  - name: sec-ctx-demo
    image: gcr.io/google-samples/node-hello:1.0</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>When a container or pod does not request a user ID under which it should be run,
the effective UID depends on the SCC that emits this pod. Because the <code>restricted-v2</code> SCC
is granted to all authenticated users by default, it will be available to all
users and service accounts and used in most cases. The <code>restricted-v2</code> SCC uses
<code>MustRunAsRange</code> strategy for constraining and defaulting the possible values of
the <code>securityContext.runAsUser</code> field. The admission plugin will look for the
<code>openshift.io/sa.scc.uid-range</code> annotation on the current project to populate
range fields, as it does not provide this range. In the end, a container will
have <code>runAsUser</code> equal to the first value of the range that is
hard to predict because every project has different ranges.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">With explicit <code>runAsUser</code> setting</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: security-context-demo
spec:
  securityContext:
    runAsUser: 1000 <b class="conum">(1)</b>
  containers:
    - name: sec-ctx-demo
      image: gcr.io/google-samples/node-hello:1.0</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A container or pod that requests a specific user ID will be accepted by
{product-title} only when a service account or a user is granted access to a SCC
that allows such a user ID. The SCC can allow arbitrary IDs, an ID that falls
into a range, or the exact user ID specific to the request.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This configuration is valid for SELinux, fsGroup, and Supplemental Groups.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-context-constraints-creating_configuring-internal-oauth">Creating security context constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create security context constraints (SCCs) by using the OpenShift CLI (<code>oc</code>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Creating and modifying your own SCCs are advanced operations that might cause instability to your cluster. If you have questions about using your own SCCs, contact Red Hat Support. For information about contacting Red Hat support, see <em>Getting support</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Install the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>Log in to the cluster as a user with the <code>cluster-admin</code> role.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define the SCC in a YAML file named <code>scc-admin.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: SecurityContextConstraints
apiVersion: security.openshift.io/v1
metadata:
  name: scc-admin
allowPrivilegedContainer: true
runAsUser:
  type: RunAsAny
seLinuxContext:
  type: RunAsAny
fsGroup:
  type: RunAsAny
supplementalGroups:
  type: RunAsAny
users:
- my-admin-user
groups:
- my-admin-group</code></pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, you can drop specific capabilities for an SCC by setting the <code>requiredDropCapabilities</code> field with the desired values. Any specified capabilities are dropped from the container. To drop all capabilities, specify <code>ALL</code>. For example, to create an SCC that drops the <code>KILL</code>, <code>MKNOD</code>, and <code>SYS_CHROOT</code> capabilities, add the following to the SCC object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">requiredDropCapabilities:
- KILL
- MKNOD
- SYS_CHROOT</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot list a capability in both <code>allowedCapabilities</code> and <code>requiredDropCapabilities</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CRI-O supports the same list of capability values that are found in the <a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities">Docker documentation</a>.</p>
</div>
</li>
<li>
<p>Create the SCC by passing in the file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">$ oc create -f scc-admin.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">securitycontextconstraints "scc-admin" created</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that the SCC was created:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">$ oc get scc scc-admin</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">NAME        PRIV      CAPS      SELINUX    RUNASUSER   FSGROUP    SUPGROUP   PRIORITY   READONLYROOTFS   VOLUMES
scc-admin   true      []        RunAsAny   RunAsAny    RunAsAny   RunAsAny   &lt;none&gt;     false            [awsElasticBlockStore azureDisk azureFile cephFS cinder configMap downwardAPI emptyDir fc flexVolume flocker gcePersistentDisk gitRepo glusterfs iscsi nfs persistentVolumeClaim photonPersistentDisk quobyte rbd secret vsphere]</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="role-based-access-to-ssc_configuring-internal-oauth">Role-based access to security context constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can specify SCCs as resources that are handled by RBAC. This allows
you to scope access to your SCCs to a certain project or to the entire
cluster. Assigning users, groups, or service accounts directly to an
SCC retains cluster-wide scope.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot assign a SCC to pods created in one of the default namespaces: <code>default</code>, <code>kube-system</code>, <code>kube-public</code>, <code>openshift-node</code>, <code>openshift-infra</code>, <code>openshift</code>. These namespaces should not be used for running pods or services.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To include access to SCCs for your role, specify the <code>scc</code> resource
when creating a role.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">$ oc create role &lt;role-name&gt; --verb=use --resource=scc --resource-name=&lt;scc-name&gt; -n &lt;namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This results in the following role definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
...
  name: role-name <b class="conum">(1)</b>
  namespace: namespace <b class="conum">(2)</b>
...
rules:
- apiGroups:
  - security.openshift.io <b class="conum">(3)</b>
  resourceNames:
  - scc-name <b class="conum">(4)</b>
  resources:
  - securitycontextconstraints <b class="conum">(5)</b>
  verbs: <b class="conum">(6)</b>
  - use</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The role&#8217;s name.</p>
</li>
<li>
<p>Namespace of the defined role. Defaults to <code>default</code> if not specified.</p>
</li>
<li>
<p>The API group that includes the <code>SecurityContextConstraints</code> resource.
Automatically defined when <code>scc</code> is specified as a resource.</p>
</li>
<li>
<p>An example name for an SCC you want to have access.</p>
</li>
<li>
<p>Name of the resource group that allows users to specify SCC names in
the <code>resourceNames</code> field.</p>
</li>
<li>
<p>A list of verbs to apply to the role.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A local or cluster role with such a rule allows the subjects that are
bound to it with a role binding or a cluster role binding to use the
user-defined SCC called <code>scc-name</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Because RBAC is designed to prevent escalation, even project administrators
are unable to grant access to an SCC. By default, they are not
allowed to use the verb <code>use</code> on SCC resources, including the
<code>restricted-v2</code> SCC.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-context-constraints-command-reference_configuring-internal-oauth">Reference of security context constraints commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can manage security context constraints (SCCs) in your instance as normal API objects using the OpenShift CLI (<code>oc</code>).</p>
</div>
<div class="sect2">
<h3 id="listing-security-context-constraints_configuring-internal-oauth">Listing security context constraints</h3>
<div class="paragraph">
<p>To get a current list of SCCs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">$ oc get scc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">NAME                              PRIV    CAPS                   SELINUX     RUNASUSER          FSGROUP     SUPGROUP    PRIORITY     READONLYROOTFS   VOLUMES
anyuid                            false   &lt;no value&gt;             MustRunAs   RunAsAny           RunAsAny    RunAsAny    10           false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
hostaccess                        false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","hostPath","persistentVolumeClaim","projected","secret"]
hostmount-anyuid                  false   &lt;no value&gt;             MustRunAs   RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","hostPath","nfs","persistentVolumeClaim","projected","secret"]
hostnetwork                       false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   MustRunAs   &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
hostnetwork-v2                    false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsRange     MustRunAs   MustRunAs   &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
node-exporter                     true    &lt;no value&gt;             RunAsAny    RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["*"]
nonroot                           false   &lt;no value&gt;             MustRunAs   MustRunAsNonRoot   RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
nonroot-v2                        false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsNonRoot   RunAsAny    RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
privileged                        true    ["*"]                  RunAsAny    RunAsAny           RunAsAny    RunAsAny    &lt;no value&gt;   false            ["*"]
restricted                        false   &lt;no value&gt;             MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]
restricted-v2                     false   ["NET_BIND_SERVICE"]   MustRunAs   MustRunAsRange     MustRunAs   RunAsAny    &lt;no value&gt;   false            ["configMap","downwardAPI","emptyDir","persistentVolumeClaim","projected","secret"]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examining-a-security-context-constraints-object_configuring-internal-oauth">Examining security context constraints</h3>
<div class="paragraph">
<p>You can view information about a particular SCC, including which users, service accounts, and groups the SCC is applied to.</p>
</div>
<div class="paragraph">
<p>For example, to examine the <code>restricted</code> SCC:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">$ oc describe scc restricted</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-terminal" data-lang="terminal">Name:                                  restricted
Priority:                              &lt;none&gt;
Access:
  Users:                               &lt;none&gt; <b class="conum">(1)</b>
  Groups:                              &lt;none&gt; <b class="conum">(2)</b>
Settings:
  Allow Privileged:                    false
  Allow Privilege Escalation:          true
  Default Add Capabilities:            &lt;none&gt;
  Required Drop Capabilities:          KILL,MKNOD,SETUID,SETGID
  Allowed Capabilities:                &lt;none&gt;
  Allowed Seccomp Profiles:            &lt;none&gt;
  Allowed Volume Types:                configMap,downwardAPI,emptyDir,persistentVolumeClaim,projected,secret
  Allowed Flexvolumes:                 &lt;all&gt;
  Allowed Unsafe Sysctls:              &lt;none&gt;
  Forbidden Sysctls:                   &lt;none&gt;
  Allow Host Network:                  false
  Allow Host Ports:                    false
  Allow Host PID:                      false
  Allow Host IPC:                      false
  Read Only Root Filesystem:           false
  Run As User Strategy: MustRunAsRange
    UID:                               &lt;none&gt;
    UID Range Min:                     &lt;none&gt;
    UID Range Max:                     &lt;none&gt;
  SELinux Context Strategy: MustRunAs
    User:                              &lt;none&gt;
    Role:                              &lt;none&gt;
    Type:                              &lt;none&gt;
    Level:                             &lt;none&gt;
  FSGroup Strategy: MustRunAs
    Ranges:                            &lt;none&gt;
  Supplemental Groups Strategy: RunAsAny
    Ranges:                            &lt;none&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Lists which users and service accounts the SCC is applied to.</p>
</li>
<li>
<p>Lists which groups the SCC is applied to.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1 _additional-resources">
<h2 id="additional-resources_configuring-internal-oauth">Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.13/html-single/support/#getting-support">Getting support</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-07-21 13:38:44 UTC
</div>
</div>
</body>
</html>